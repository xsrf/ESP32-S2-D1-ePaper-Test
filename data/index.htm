<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ePaper</title>
</head>
<body>
    <a href="/edit">File-System editor</a>
    <hr />
    <label for="filelist">Select file:</label>
    <select id="filelist"></select>
    <button id="show">Show on EPD</button>
</body>
</html>
<script>

async function updateFileList() {
    let el = document.querySelector('#filelist');
    list = await fetch('/list?dir=/');
    data = await list.json();
    bitmaps = data.map( e => e.name ).filter(e => e.endsWith('.bmp')).sort();
    el.innerHTML = bitmaps.map(e => `<option value="${e}">${e}</option>`).join();
}

updateFileList();

document.querySelector('#show').addEventListener('click', (e)=> {
    let file = document.querySelector('#filelist').value;
    if(file.endsWith('.bmp')) {
        fetch('/show?file=/' + file);
    }
})

</script>